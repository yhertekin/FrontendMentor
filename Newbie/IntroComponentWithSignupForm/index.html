<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<!-- displays site properly based on user's device -->

		<link
			rel="icon"
			type="image/png"
			sizes="32x32"
			href="./images/favicon-32x32.png"
		/>
		<link rel="stylesheet" href="style.css" />
		<title>Frontend Mentor | Intro component with sign up form</title>

		<style>
			.attribution {
				font-size: 11px;
				text-align: center;
			}
			.attribution a {
				color: hsl(228, 45%, 44%);
			}
		</style>
	</head>
	<body>
		<header class="header">
			<h1 class="header__title">Learn to code by watching others</h1>
			<p class="header__text">
				See how experienced developers solve problems in real-time. Watching
				scripted tutorials is great, but understanding how developers think is
				invaluable.
			</p>
		</header>
		<main class="main">
			<button class="main__button">
				<span>Try it free 7 days</span> then $20/mo. thereafter
			</button>
			<form class="main__form" onsubmit="event.preventDefault()">
				<div class="input__container">
					<input
						class="input__name"
						type="text"
						placeholder="First Name"
						name="first_name"
					/>
				</div>
				<div class="input__container">
					<input
						class="input__last-name"
						type="text"
						placeholder="Last Name"
						name="last_name"
					/>
				</div>
				<div class="input__container">
					<input
						class="input__email"
						type="email"
						placeholder="Email Address"
						name="email_address"
					/>
				</div>
				<div class="input__container">
					<input
						class="input__password"
						type="password"
						placeholder="Password"
						name="password"
					/>
				</div>
				<input
					class="input__submit"
					type="submit"
					value="Claim your free trial "
				/>
				<p class="form__info">
					By clicking the button, you are agreeing to our
					<a href="#">Terms and Services</a>
				</p>
			</form>
			<footer>
				<p class="attribution">
					Challenge by
					<a href="https://www.frontendmentor.io?ref=challenge" target="_blank"
						>Frontend Mentor</a
					>. Coded by <a href="https://github.com/yhertekin">yhertekin</a>.
				</p>
			</footer>
		</main>

		<script>
			function getErrorText(element) {
				if (element.type === "email") {
					return "Looks like this is not an email";
				}
				return element.placeholder + " cannot be empty";
			}

			function createErrorMessage(element) {
				let p = document.createElement("p");
				p.innerText = getErrorText(element);
				p.classList.add("input__text--error");
				element.after(p);

				let icon = document.createElement("img");
				icon.src = "/images/icon-error.svg";
				icon.classList.add("input__icon--error");
				element.before(icon);
			}

			function checkField(element) {
				if (element.type === "email") {
					return (
						element.value === "" ||
						!element.value.match(
							/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/
						)
					);
				}
				return element.value === "";
			}

			let submit = document.querySelector(".input__submit");

			submit.addEventListener("click", () => {
				let inputFields = document.querySelectorAll(
					"input:not(.input__submit)"
				);
				let currentErrors = document.querySelectorAll(".input__text--error");
				let currentErrorsIcon = document.querySelectorAll(
					".input__icon--error"
				);

				currentErrors.forEach((error) => error.remove());
				currentErrorsIcon.forEach((error) => error.remove());

				inputFields.forEach((field) => {
					field.classList.remove("input--error");
					if (checkField(field)) {
						createErrorMessage(field);
						field.classList.add("input--error");
					}
				});
			});
		</script>
	</body>
</html>
